# Pizzeria
МДиСУБД, 353501, Малиновская Е. А.

## Описание
Проект представляет собой систему управления пиццерией, включающую функциональность для управления пользователями, заказами, купонами и ролями. Система будет интегрирована с базой данных MySql.

## Функциональные требования
1. **Авторизация/аутентификация пользователя**:
   Система должна обеспечивать возможность пользователям входить в свою учетную запись и выходить из нее.
   Регистрация нового пользователя с проверкой уникальности email.
   Вход в систему с использованием email и пароля.
2. **Управление пользователями (CRUD)**: Система должна предоставлять функциональность для управления пользователями, включая создание, чтение, обновление и удаление учетных записей.
   Администраторы могут создавать новых пользователей.
   Просмотр списка всех пользователей с возможностью фильтрации.
   Обновление информации о пользователях (например, изменение пароля, имени, роли).
   Удаление учетных записей пользователей.
3. **Система ролей**: Система должна поддерживать различные роли пользователей, такие как администратор и клиент.
4. **Журналирование действий пользователя**: Система должна вести журнал действий пользователей для обеспечения безопасности и отслеживания изменений. Возможность просмотра журнала действий администратором. Фильтрация журнала по дате, пользователю и типу действия.
5. **Система заказов**: Система позволяет совершать заказы на одну или несколько пицц, для каждой пиццы можно будет указать количество ингредиентов. Заказы помещаются в корзине и имеют несколько статусов: готовится, доставка, принят. Все сделанные заказы отображаются в корзине.
6. **Система купонов и скидок**: Система предоставляет возможность использовать единоразово купоны или многоразово скидки на позиции. 

## Список таблиц для БД:
 Miro: https://miro.com/app/board/uXjVJNeyQ_I=/?share_link_id=351665143686
 
## Описание таблиц:
1. User (Пользователь)
Назначение: Клиенты, которые делают заказы.
Поля:
user_id: Уникальный идентификатор пользователя (PK).
name: Имя пользователя.
email: Электронная почта пользователя (уникальна).
phone_number: Номер телефона пользователя.
profile_picture: Ссылка на изображение профиля.

Связь: Имеет много Order и Address.

2. Pizza (Пицца)
Назначение: Меню пиццерии, имеющиеся пиццы.
Поля: 
pizza_id: Уникальный идентификатор пиццы (PK).
name: Название пиццы.
category_id: Идентификатор категории (FK), к которой принадлежит пицца.
Связь: Входит в многие Order_Item. Принадлежит к Category.

3. Category (Категория)
Назначение: Группировка позиций меню.
Поля:
category_id: Уникальный идентификатор категории (PK).
name: Название категории.
description: Описание категории.
Связь: Имеет много Product, Ingredients.

5. Order (Заказ)
Назначение: Информация о заказе.
Поля: 
order_id: Уникальный идентификатор заказа (PK).
user_id: Идентификатор пользователя (FK), сделавшего заказ.
created_at: Дата и время создания заказа.
amount: Общая сумма заказа.
status: Статус заказа (например, "в обработке", "доставлен").
coupon_id: Идентификатор примененного купона (FK).
discount_id: Идентификатор примененной скидки (FK).
Связь: Содержит много Order_Item, имеет один Address для доставки.

6. Order_Item (Элемент заказа)
Назначение: Что именно и в каком количестве заказано.
Поля:
order_item_id: Уникальный идентификатор элемента заказа (PK).
order_id: Идентификатор заказа (FK), к которому принадлежит элемент.
pizza_id: Идентификатор пиццы (FK), которая входит в заказ.
amount: Количество данной пиццы в заказе.
Связь: Соединяет Order и Product. Ключевая сущность для корзины.

7. Address (Адрес доставки)
Назначение: Куда привезти заказ.
Поля:
address_id: Уникальный идентификатор адреса (PK).
user_id: Идентификатор пользователя (FK), которому принадлежит адрес.
street: Улица.
house: Дома.
appartment: Квартира.
is_default: Флаг, указывающий, является ли адрес адресом по умолчанию.
Связь: Принадлежит User, используется в Order.

8. Cart (Корзина)
Назначение: Временное хранение выбранных товаров перед оформлением.
Поля:
cart_id: Уникальный идентификатор корзины (PK).
user_id: Идентификатор пользователя (FK), которому принадлежит корзина.
order_id: Идентификатор связанного заказа (FK).
Связь: Содержит много Order.

9. Ingredient (Ингредиент)
Назначение: Справочник возможных компонентов. Нужен для описания пицц и, потенциально, для сборки своей.
Поля: id, name ("сыр моцарелла", "ветчина", "томатный соус"), price (для опциональных добавок).
Связь: Многие-ко-многим с Product (через Product_Ingredient). Одна пицца (Product) содержит много ингредиентов.

10. Coupon
Поля:
coupon_id: Уникальный идентификатор купона (PK).
code: Код купона, вводимый пользователем.
discount_type: Тип скидки (фиксированная сумма или процент).
amount: Размер скидки.
expiration_date: Срок действия купона.
Связи: содержит один Order.

12. Discount
Поля:
discount_id: Уникальный идентификатор скидки (PK).
name: Название скидки.
type: Тип скидки.
amount: Размер скидки.
valid_from: Дата начала действия скидки.
valid_until: Дата окончания действия скидки.
is_active: Флаг, указывающий, активна ли скидка.
Связи: содержит много Order.
